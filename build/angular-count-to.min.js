/*! angular-count-to 2015-10-27 */
var countTo=angular.module("countTo",[]).directive("countTo",["$timeout","$filter",function($timeout,$filter){return{replace:!1,scope:!0,link:function(scope,element,attrs){var e=element[0],num,refreshInterval,duration,steps,step,countTo,value,increment,filter,calculate=function(){refreshInterval=30,step=0,scope.timoutId=null,countTo=parseFloat(attrs.countTo)||0,scope.value=parseInt(attrs.value,10)||0,duration=1e3*parseFloat(attrs.duration)||0,filter=function(){var result=function(a){return Math.round(a)},filter,filterParams=eval(attrs.countFilter);return filterParams instanceof Array&&filterParams.length>=1&&"string"==typeof filterParams[0]&&(filter=$filter(filterParams[0]),filterParams=filterParams.splice(1,filterParams.length-1),result=function(a){var b=[a];return Array.prototype.push.apply(b,filterParams),filter.apply(null,b)}),result}(),steps=Math.ceil(duration/refreshInterval),increment=(countTo-scope.value)/steps,num=scope.value},tick=function(){scope.timoutId=$timeout(function(){num+=increment,step++,step>=steps?($timeout.cancel(scope.timoutId),num=countTo,e.textContent=filter(countTo)):(e.textContent=filter(num),tick())},refreshInterval)},start=function(){scope.timoutId&&$timeout.cancel(scope.timoutId),calculate(),tick()};return attrs.$observe("countTo",function(a){a&&start()}),attrs.$observe("value",function(){start()}),attrs.$observe("countFilter",function(){start()}),!0}}}]);